(this["webpackJsonpyandex-music-token"]=this["webpackJsonpyandex-music-token"]||[]).push([[0],{21:function(e,t,a){e.exports=a(33)},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),s=a(18),i=a(11),u=a.n(i),l=a(12),h=a(19),p=a(8),b=a(10),d=a(6),m=a(9),f=a(14),_=(a(27),a(28),a(35)),O=a(38),y=a(36),j=a(37),w=a(39);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this))).body=e,a}return Object(m.a)(t,e),t}(Object(f.a)(Error)),g=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this))).body=e,a}return Object(m.a)(t,e),t}(Object(f.a)(Error)),x=function e(){var t=this;Object(p.a)(this,e),this.oauth_url="https://oauth.yandex.ru",this.client_id="23cabbbdc6cd418abb4b39c32c41195d",this.client_secret="53bc75238f0c4d08a118e51fe9203300",this.generate_token_by_username_and_password=function(){var e=Object(h.a)(u.a.mark((function e(a,n,r,c){var o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t.oauth_url,"/token"),s={grant_type:"password",client_id:t.client_id,client_secret:t.client_secret,username:a,password:n},r&&c&&(s=E({},s,{x_captcha_answer:r,x_captcha_key:c})),e.next=5,t.post(o,s).then((function(e){return e.json()})).then((function(e){return e.access_token}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),this.serialize=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},this.handleCaptcha=function(e,t){throw e.includes("Wrong")?new g(t):new k(t)},this.post=function(e,a){return fetch(e,{method:"POST",body:t.serialize(a)}).then((function(e){return e.ok?e:e.json().then((function(e){var a=e.error_description||"Unknown HTTP Error";if(a.includes("CAPTCHA"))return t.handleCaptcha(a,e);throw new Error(a)}))}))}},C=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(d.a)(t).call(this,e))).api=new x,a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(E({},a.state,Object(l.a)({},n,r)))},a.handleSubmit=function(e){e.preventDefault(),a.setState(E({},a.state,{x_captcha_url:void 0,x_captcha_key:void 0}));var t=a.state,n=t.username,r=t.password,c=t.x_captcha_answer,o=t.x_captcha_key;a.api.generate_token_by_username_and_password(n,r,c,o).then((function(e){alert(e)})).catch((function(e){if(e instanceof k||e instanceof g){var t=e.body,n=t.x_captcha_url,r=t.x_captcha_key;a.setState(E({},a.state,{x_captcha_url:n,x_captcha_key:r}))}else alert("An error has occurred: ".concat(e))}))},a.state={username:"",password:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.x_captcha_url;return r.a.createElement(_.a,null,r.a.createElement(O.a,null,r.a.createElement(O.a.Group,{controlId:"formBasicEmail"},r.a.createElement(O.a.Label,{column:!1},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d, \u043f\u043e\u0447\u0442\u0443 \u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d:"),r.a.createElement(O.a.Control,{name:"username",onChange:this.handleChange,type:"email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d, \u043f\u043e\u0447\u0442\u0443 \u0438\u043b\u0438 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"})),r.a.createElement(O.a.Group,{controlId:"formBasicPassword"},r.a.createElement(O.a.Label,{column:!1},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(O.a.Control,{name:"password",onChange:this.handleChange,type:"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})),e&&r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(j.a,{fluid:!0,src:e})),r.a.createElement(O.a.Control,{name:"x_captcha_answer",onChange:this.handleChange,as:"textarea",type:"plain",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u0430\u043f\u0447\u0443"}),r.a.createElement(y.a.Append,null,r.a.createElement(w.a,{type:"submit",onClick:this.handleSubmit},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))),r.a.createElement(w.a,{variant:"primary",type:"submit",block:!0,onClick:this.handleSubmit},"\u0412\u043e\u0439\u0442\u0438")))}}]),t}(n.Component);o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.8d439da3.chunk.js.map